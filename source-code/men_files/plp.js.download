!function(){var platform,store,platformStore,pageType,categoryID,searchPerf,evar60,evar61,prop8,channel,server,pageName,pageGridSize,pageSize,viewportCategory,isAToZLandingPage=function(){return-1!==document.location.href.indexOf("/a-to-z-of-brands/cat/")},removeSpaceAroundPipe=function(str){return str},thisPage=function(){return window.location.href.toLowerCase()},eventStatus={paginated:!1},whichFloor=function(){return-1!==thisPage().indexOf("/women/")||-1!==thisPage().indexOf("/mujer/")||-1!==thisPage().indexOf("/damen/")||-1!==thisPage().indexOf("/femme/")||-1!==thisPage().indexOf("/donna/")||-1!==thisPage().indexOf("/женское/")?"women":-1!==thisPage().indexOf("/men/")||-1!==thisPage().indexOf("/hombre/")||-1!==thisPage().indexOf("/herren/")||-1!==thisPage().indexOf("/homme/")||-1!==thisPage().indexOf("/uomo/")||-1!==thisPage().indexOf("/аутлет/")?"men":"home"},viewportDimensions=function(){var height=window.innerHeight||"",width=window.innerWidth||"";return"number"==typeof width&&"number"==typeof height?width+":"+height:""},removeEmptyValues=function(values){var nonEmpty=[];for(var v in values)""!==values[v]&&nonEmpty.push(values[v]);return nonEmpty},concatWithSpaces=function(values){return removeEmptyValues(values).join(" ")},concatWithPipes=function(values){return removeEmptyValues(values).join("|")},map=function(a,func){for(var b=[],i=0;i<a.length;i++)b.push(func(a[i],i));return b},setVars=function(vars){var names=[];for(var name in vars){var val=vars[name];s[name]=val,names.push(name)}return s.linkTrackVars=names.join(","),names.join(",")},setEvents=function(events){var names=[],eventVals=[];for(var name in events){var val=events[name];val?eventVals.push(name+"="+val):eventVals.push(name),names.push(name)}return s.linkTrackEvents=names.join(","),s.events=eventVals.join(","),names.join(",")},recMap={1:"recs",2:"recs no products",3:"recs error",4:"no recs"},buildRefinementsList=function(refinements,refinementProp,selectionProp){for(var refinement,selection,ret=[],i=0;i<refinements.length;i++)if(refinement=refinements[i],"currentprice"===refinement.refinementId){var max=refinements[0].max,min=refinements[0].min,minMax=min+"-"+max;ret.push(refinement[refinementProp].toLowerCase()+"|"+minMax)}else if(refinement.selections)for(var j=0;j<refinement.selections.length;j++)selection=refinement.selections[j],ret.push(refinement[refinementProp].toLowerCase()+"|"+selection[selectionProp].toLowerCase());return ret.join(",")},buildAllRefinementsList=function(refinements){return refinements.map(function(refinement){return"sort"===refinement.refinementId?"sortby":refinement.refinementId}).join("|")},setAllRefinements=function(vars,refinements){Array.isArray(refinements)&&refinements.length&&(vars.eVar80=buildAllRefinementsList(refinements),vars.eVar129=refinements.length)},setCommonVars=function(vars){vars.eVar60=evar60,vars.eVar61=evar61,vars.prop8=prop8,vars.channel=channel,vars.server=server,vars.pageName=void 0!==vars.pageNameNewValue&&""!==vars.pageNameNewValue?vars.pageNameNewValue:pageName},setReturnedProductListIfAvailable=function(vars,payload){var returnedProductList=payload.returnedProductList;Array.isArray(returnedProductList)&&returnedProductList.length>0&&(vars.list2=returnedProductList.join(","))},isNotSmallLayout=function(){return"small"!==viewportCategory},isSmallLayout=function(){return"small"===viewportCategory},whichPageNumber=function(){if(-1!==document.location.href.indexOf("?page=")||-1!==document.location.href.indexOf("&page=")){var pageSplit,docLoc=document.location.href.toLowerCase();-1!==docLoc.indexOf("?page=")?pageSplit=docLoc.split("?page="):-1!==docLoc.indexOf("&page=")&&(pageSplit=docLoc.split("&page="));var pageNumberValue=-1!==pageSplit[1].indexOf("&")?pageSplit[1].split("&")[0]:pageSplit[1]}return void 0!==pageNumberValue?" page "+Number(pageNumberValue):""},eventHandlers={"tracking.productList.pageLoad":function(payload){var raiseEvent=function(){var parseCustomerID=function(customerid){return""!==s.Util.getQueryParam("custref")?s.Util.getQueryParam("custref"):customerid},country=payload.country,currency=payload.currency,customerID=void 0!==parseCustomerID(payload.customerID)&&"-1"!==parseCustomerID(payload.customerID).toString()?parseCustomerID(payload.customerID):"",pageNumber=payload.pageNumber,totalStyles=payload.totalStyles,personalisationStatus=payload.personalisationStatus,personalisationType=payload.personalisationType,recommendedProductsList=payload.recommendedProductsList,numberOfRecommendedItems=payload.numberOfRecommendedItems,totalBagItems=payload.totalBagItems,totalBagValueLocalCurrency=payload.totalBagValueLocalCurrency,nextGenVersionId=payload.nextGenVersionID,floor=function(payloadValue){return void 0!==payloadValue?payloadValue:whichFloor()}(payload.floor),pageName=removeSpaceAroundPipe(function(payloadValue){return void 0!==payloadValue?payloadValue:payload.platform+" "+payload.store+"|category page|a to z of brands"}(payload.pageName)),breadcrumbs=function(payloadValue){return void 0!==payloadValue?payloadValue:whichFloor()+"|a to z of brands"}(payload.breadcrumbs),searchTerm=payload.searchTerm,searchPasses=payload.searchPasses||[],searchType=payload.searchType,failedSearchType=payload.failedSearchType,refinements=payload.refinements;platform=payload.platform,store=window.__siteChrome.context.getStoreId().toLowerCase(),pageType=payload.pageType,categoryID=payload.categoryID,pageGridSize=payload.pageGridSize,pageSize=payload.pageSize,viewportCategory=payload.viewportCategory,s=s_gi(s.account),visitor.setCustomerIDs({customerId:customerID});var events={},vars={};platformStore=concatWithSpaces([platform,store]),s.server=server=platformStore,s.channel=floor,channel=floor,s.campaign=s.getCampaignID(),s.pageName=pageName;var navApi=window.performance.timing;s.eVar29=navApi.responseStart-navApi.navigationStart,s.eVar30=navApi.domContentLoadedEventEnd-navApi.navigationStart,s.events="event128="+s.eVar30,setReturnedProductListIfAvailable(vars,payload),vars.eVar1=s.getVisitNum(),vars.eVar4=concatWithPipes([pageGridSize,pageNumber,pageSize]),vars.eVar17=s.getNewRepeat(365),vars.eVar19=viewportDimensions(),vars.eVar10=customerID,vars.eVar47=s.getPreviousValue(s.eVar6,"gpv_e47",""),vars.eVar70=concatWithPipes([totalBagItems,totalBagValueLocalCurrency,currency]),vars.eVar78=concatWithPipes(["next gen page",nextGenVersionId]),vars.eVar112=country.toLowerCase(),vars.eVar113=currency.toLowerCase(),vars.prop5=s.getCustomTimeDate().toString(),vars.prop6=s.Util.getQueryParam("ctaref"),vars.prop8=prop8=(isAToZLandingPage()?"category":pageType)+" page",vars.prop11=encodeURI(window.location.href.replace(/%20/gi,"+")),vars.prop46=s.Util.cookieRead("_s_pl"),vars.eVar100=numberOfRecommendedItems,void 0!==recommendedProductsList&&(vars.eVar101=recommendedProductsList.join(",")),vars.prop75=concatWithPipes([recMap[personalisationStatus],personalisationType]);var countRefinements=refinements&&refinements.listAppliedRefinements&&refinements.listAppliedRefinements.length,sort=refinements&&refinements.sort&&refinements.sort.sortName&&"Relevance"!==refinements.sort.sortName&&"Our favourites"!==refinements.sort.sortName?"sort by":"";if(map(refinements.listAppliedRefinements||[],function(el,i){return el&&el.refinementId&&el.refinementId.toLowerCase()}).sort().push(sort),vars.eVar128=totalStyles,"search"===pageType){var refined=countRefinements+(""!==sort?1:0)?" refined":"";searchPerf=failedSearchType?"failed search":"successful search",s.pageName=removeSpaceAroundPipe(concatWithPipes([platformStore,pageType+" page",searchPerf+refined+whichPageNumber()])),""===failedSearchType.toString()?events.event3="":(events.event4="","zero results"===failedSearchType&&(events.event60=""),"failed by error"===failedSearchType&&(events.event61="")),vars.prop43=searchPasses.join("|"),evar60=evar61=vars.eVar6=vars.eVar60=vars.eVar61=vars.prop1=vars.prop2=vars.prop3="search|all",vars.eVar25=searchTerm,vars.prop14=searchType,"suggested"===searchType&&(events.event62=""),"recent"===searchType&&(events.event63="")}if("category"===pageType){if(s.pageName=removeSpaceAroundPipe(concatWithPipes([platformStore,pageType+" page",categoryID+whichPageNumber()+(countRefinements+(""!==sort?1:0)?" refined":"")])),""!==s.Util.getQueryParam("cid")){var cid=s.Util.getQueryParam("cid");evar60=evar61=vars.eVar60=vars.eVar61=cid.indexOf("#")>1?cid.split("#")[0]:cid}var sections=(breadcrumbs||"").split("%$");sections.length<3?vars.prop1=vars.prop2=vars.prop3=vars.eVar6=concatWithPipes(sections):3===sections.length?(vars.prop1=concatWithPipes(sections.slice(0,2)),vars.prop2=vars.prop3=vars.eVar6=concatWithPipes(sections)):sections.length>3&&(vars.prop1=concatWithPipes(sections.slice(0,2)),vars.prop2=concatWithPipes(sections.slice(0,3)),vars.prop3=vars.eVar6=concatWithPipes(sections))}if(isAToZLandingPage()){var sections=(breadcrumbs||"").split("%$");if(vars.prop1=vars.prop2=vars.prop3=vars.eVar6=concatWithPipes(sections),""!==s.Util.getQueryParam("cid")){var cid=s.Util.getQueryParam("cid");evar60=evar61=vars.eVar60=vars.eVar61=cid.indexOf("#")>1?cid.split("#")[0]:cid}}vars.prop10=s.getPreviousValue(s.pageName,"gpv_p10","").toLowerCase();var nlid=s.Util.getQueryParam("nlid");nlid&&(vars.eVar120=nlid,events.event170=""),pageName=s.pageName,setVars(vars),setEvents(events),s.t()};if(0===window.performance.timing.domContentLoadedEventEnd){var raiseEventAndDetachListener=function(){raiseEvent(),window.removeEventListener("DOMContentLoaded",raiseEventAndDetachListener)};window.addEventListener("DOMContentLoaded",raiseEventAndDetachListener)}else raiseEvent()},"tracking.productList.refine.refinements":function(payload){var context=payload.refinements.context,listAppliedRefinements=payload.refinements.listAppliedRefinements,listAllAppliedRefinements=payload.refinements.listAllAppliedRefinements,sort=payload.refinements.sort,vars={},events={},overrides={},trackFunc="tl",setRefinements=function(){if(listAppliedRefinements.length)return vars.prop13=buildRefinementsList(listAppliedRefinements,"refinementName","selectionName"),vars.list3=buildRefinementsList(listAppliedRefinements,"refinementId","selectionId"),!(!vars.prop13&&!vars.list3)};switch(context){case"refinements:close:viewItems":var hasSelections=setRefinements();if(hasSelections)events.event5="";else if(void 0===hasSelections)return;trackFunc="t";break;case"refinements:select:all":setRefinements(),events.event106="",trackFunc="tl",isNotSmallLayout()&&(events.event5="",trackFunc="t");break;case"refinements:select":if(!isNotSmallLayout())return;setRefinements(),events.event5="",trackFunc="t";break;case"refinements:deselect":setRefinements(),events.event67="",trackFunc="t",isSmallLayout()&&(trackFunc="tl");break;case"refinements:clear:all":setRefinements(),events.event68="",vars.eVar58="refinements|clear all",trackFunc="t";break;case"refinements:clear":setRefinements(),events.event68="",vars.eVar58="refinements|clear",trackFunc="t",isSmallLayout()&&(trackFunc="tl");break;case"refinements:done":trackFunc="t";var hasSelections=setRefinements();if(!1===hasSelections)return;hasSelections&&(events.event5="");break;case"refinements:sort":sort&&(vars.prop13=concatWithPipes(["sort by",sort.sortName&&sort.sortName.toLowerCase()]),vars.list3=concatWithPipes(["sort by",sort.sortType&&sort.sortType.toLowerCase()])),events.event5="",trackFunc="t";break;default:return}if(setCommonVars(vars),setReturnedProductListIfAvailable(vars,payload),setAllRefinements(vars,listAllAppliedRefinements),overrides.linkTrackVars=setVars(vars),overrides.linkTrackEvents=setEvents(events),overrides.linkTrackVars||overrides.linkTrackEvents){var countRefinements=listAppliedRefinements&&listAppliedRefinements.length||0,sortRef=sort&&sort.sortName&&"Relevance"!==sort.sortName&&"Our favourites"!==sort.sortName?"sort by":"",refined=countRefinements+(""!==sortRef?1:0)?" refined":"";s.pageName=concatWithPipes("category"===pageType?[platformStore,pageType+" page",categoryID+refined]:[platformStore,pageType+" page",searchPerf+refined]),pageName=s.pageName,"tl"===trackFunc&&s.tl(!0,"o",context,overrides),"t"===trackFunc&&s.t()}s.eVar58=""},"tracking.productList.paginate":function(payload){eventStatus.paginate=!0;var context=payload.context,pageNumber=payload.pageNumber,listAllAppliedRefinements=payload.refinements.listAllAppliedRefinements,postfix="paginate with refinement"===context?" refined":"",platformStore=platform+" "+store,vars={};"category"===pageType&&(s.pageName=concatWithPipes([platformStore,pageType+" page pagination",categoryID+" page "+pageNumber+postfix])),"search"===pageType&&(s.pageName=concatWithPipes([platformStore,pageType+" page pagination",searchPerf+" page "+pageNumber+postfix])),setReturnedProductListIfAvailable(vars,payload),vars.eVar4=concatWithPipes([pageGridSize,pageNumber,pageSize]),s.events="event9",pageName=s.pageName;var overrides={linkTrackVars:"pageName",linkTrackEvents:"event9"};setCommonVars(vars),setAllRefinements(vars,listAllAppliedRefinements),overrides.linkTrackVars=setVars(vars),s.t()},"tracking.productList.saveForLater":function(payload){var productIID=(payload.context,payload.productIID),vars={};vars.products=";"+productIID+";1;",vars.eVar13=pageType+" page";var hasBeenPaginated=function(){return eventStatus.paginate?" pagination":""},pageName_pageNumber=(s.Util.getQueryParam("page"),-1!==whichPageNumber().indexOf("page")?""+whichPageNumber():""),pageNamePageType="search"===pageType?function(){return-1!==document.location.href.indexOf("&refine=")?"successful search refined":"successful search"}():s.Util.getQueryParam("cid");vars.pageNameNewValue="search"===pageType?server+"|"+pageType+" page"+hasBeenPaginated()+"|"+pageNamePageType.replace(" refined",pageName_pageNumber+" refined"):server+"|"+pageType+" page"+hasBeenPaginated()+"|"+pageNamePageType+pageName_pageNumber.replace("|","")+(function(){return-1!==document.location.href.indexOf("&refine=")}()?" refined":""),s.events="event10";var overrides={linkTrackVars:"products,linkName,eVar13",linkTrackEvents:"event10"};setCommonVars(vars),overrides.linkTrackVars=setVars(vars),s.tl(!0,"o","Save for Later",overrides)},"tracking.mvt.viewMoreExpanded":function(payload){s.events="event185",setCommonVars({}),s.t()}};window.onload=function(){new CommonAnalytics(eventHandlers);window.analyticsEventEmitter.emit("analytics-ready")}}();
//# sourceMappingURL=plp.js.map